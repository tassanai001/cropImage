var app={};!function(){app=angular.module("MainApp",["ngRoute","ngSanitize","ngResource","ngAnimate","mgcrea.ngStrap"]),app.config(["$routeProvider","$locationProvider",function(e,t){t.html5Mode(!1).hashPrefix("!"),e.when("/",{templateUrl:"/views/index.html",controller:"mainCtrl"}).when("/sample",{templateUrl:"/views/sample/sample.html",controller:"sampleCtrl"}).otherwise({redirectTo:"/"})}])}();var spinner={},token="XXX";!function(){toastr.options={closeButton:!1,debug:!1,progressBar:!1,positionClass:"toast-bottom-right",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var e={lines:11,length:23,width:8,radius:40,corners:1,rotate:9,color:"#FFF",speed:1,trail:50,shadow:!1,hwaccel:!0,zIndex:2e9,top:"50%",left:"50%"},t=null;spinner.show=function(){var n=document.getElementById("spinner");null==t?t=new Spinner(e).spin(n):t.spin(n),$.blockUI({message:null,overlayCSS:{backgroundColor:"#5c5c5c"}})},spinner.hide=function(){var e=document.getElementById("spinner");t.stop(e),$.unblockUI()}}(),function(){app.controller("globalCtrl",["$rootScope","$scope",function(e,t){t.pageData=[{Name:"Home"},{Name:"Sample"}],t.directiveTest="HELLO WORLD",e.images="exampleimage.png",$(".upload-btn").on("click",function(){$("#upload-input").click(),$(".progress-bar").text("0%"),$(".progress-bar").width("0%")}),$("#upload-input").on("change",function(){var t=$(this).get(0).files;if(t.length>0){for(var n=new FormData,a=0;a<t.length;a++){var r=t[a];n.append("uploads[]",r,r.name)}$.ajax({url:"/upload/",type:"POST",data:n,processData:!1,contentType:!1,success:function(t){e.images=t,e.cropper.destroy();var n=document.getElementById("image");n.src="uploads/"+e.images,e.initmainMT()},xhr:function(){var e=new XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;t=parseInt(100*t),$(".progress-bar").text(t+"%"),$(".progress-bar").width(t+"%"),100===t&&$(".progress-bar").html("Done")}},!1),e}})}})}])}(),function(){app.directive("directiveSample",function(){return{restrict:"AEC",replace:!0,require:"ngModel",scope:!0,link:function(e,t,n,a){a.$render=function(){t.empty(),t.append(a.$viewValue)}}}})}(),function(){Date.prototype.addHours=function(e){return this.setHours(this.getHours()+e),this},app.filter("DateTrick",function(){return function(e){if(null!==e){var t=e.addHours(7);return t}return{}}})}(),function(){app.controller("mainCtrl",["$rootScope","$scope","mainService","searchEngineService",function(e,t,n,a){t.activePage=1,t.initMT=function(){n.GetSample().then(function(e){t.testData=e})},t.SubmitKeyword=function(){a.addKeyword({keywords:t.inputkeywords}).then(function(e){console.log(e)})},e.initmainMT=function(){function t(e){var t=e.target,n=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,a=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+n+"px, "+a+"px)",t.setAttribute("data-x",n),t.setAttribute("data-y",a)}console.log("---------- initmainMT ----------");var n=document.getElementById("image");n.src="uploads/"+e.images,console.log(n.src);var a=document.querySelectorAll(".preview");e.cropper=new Cropper(n,{ready:function(e,t){var n=this.cloneNode();n.className="",n.style.cssText="display: block;width: 100%;min-width: 0;min-height: 0;max-width: none;max-height: none;",angular.forEach(a,function(e){e.appendChild(n.cloneNode())})},aspectRatio:16/9,crop:function(e){var t=e.detail,n=this.cropper,r=n.getImageData(),o=t.width/t.height;angular.forEach(a,function(e){console.log("elem: ",e);var n=e.getElementsByTagName("img").item(0),a=e.offsetWidth,i=a/o,s=t.width/a;e.style.height=i+"px",n.style.width=r.naturalWidth/s+"px",n.style.height=r.naturalHeight/s+"px",n.style.marginLeft=-t.x/s+"px",n.style.marginTop=-t.y/s+"px"})}}),interact(".draggable").draggable({inertia:!0,restrict:{restriction:"parent",endOnly:!0,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:!0,onmove:t,onend:function(e){var t=e.target.querySelector("p");t&&(t.textContent="moved a distance of "+(0|Math.sqrt(e.dx*e.dx+e.dy*e.dy))+"px")}}),window.dragMoveListener=t},t.retateImage=function(t){"left"===t?e.cropper.rotate(-45):e.cropper.rotate(45)},t.getCroppedCanvas=function(){e.cropper.getCroppedCanvas({width:160,height:90}),e.cropper.getCroppedCanvas().toBlob(function(t){var n=new FormData;n.append("croppedImage",t),$.ajax({url:"/upload/getCropp/",method:"POST",data:n,processData:!1,contentType:!1,success:function(t){console.log("----: Upload success :----"),e.images=t,console.log(t);var n=document.getElementById("imagecrop");n.src="uploads/"+t},error:function(){console.log("Upload error")}})})},$(".modal-button").click(function(){var e=$(this).data("target");$("html").addClass("is-clipped"),$(e).addClass("is-active")}),$(".modal-close").click(function(){$("html").removeClass("is-clipped"),$(this).parent().removeClass("is-active")})}])}(),function(){app.factory("mainService",["$http","$q",function(e,t){var n={};return n.GetSample=function(){spinner.show();var n=t.defer();return e({method:"GET",url:"/sample"}).success(function(e){spinner.hide(),n.resolve(e)}).error(function(e){spinner.hide(),n.reject(e)}),n.promise},n}])}(),function(){app.controller("sampleCtrl",["$scope","$modal","sampleService",function(e,t,n){e.activePage=2,e.readSampleData=[],e.createSample=function(){n.createSample().then(function(t){"ERROR"!=t?(toastr.success("การบันทึกสำเร็จ","การบันทึกข้อมูล"),e.readSampleData.push(t)):toastr.warning("การบันทึกผิดพลาด"+t,"การบันทึกข้อมูล")})},e.createNewSample=function(){n.createNewSample(e.modalData).then(function(t){"ERROR"!=t?(toastr.success("การบันทึกสำเร็จ","การบันทึกข้อมูล"),e.readSampleData.push(t)):toastr.warning("การปรับปรุงผิดพลาด"+t,"การปรับปรุงผิดพลาด")})},e.modalData={},e.read=function(e,t){n.readSample(e).then(function(e){t(e)})},e.readAllSample=function(){n.readAllSample().then(function(t){"ERROR"!=t?e.readSampleData=t:toastr.warning("การอ่านข้อมูลผิดพลาด"+t,"การอ่านข้อมูลผิดพลาด")})},e.updateSample=function(){var t=e.currentID,a=e.currentIndex;n.updateSample(e.modalData,t).then(function(t){"ERROR"!=t?e.readSampleData[a]=e.modalData:toastr.warning("การปรับปรุงผิดพลาด"+t,"การปรับปรุงผิดพลาด")})},e.deleteConfirm=function(n,a){e.currentID=n,e.currentIndex=a,t({scope:e,template:"/views/sample/modal/sampleConfirm.html",show:!0})},e.deleteSample=function(){var t=e.currentID,a=e.currentIndex;n.deleteSample(t).then(function(t){"ERROR"!=t?e.readSampleData.splice(a,1):toastr.warning("การลบผิดพลาด"+t,"การลบผิดพลาด")})},e.checkData=function(){switch(e.modalMode){case"create":e.createNewSample();break;case"edit":e.updateSample()}},e.showSample=function(n,a,r){e.modalMode=n,e.currentID=a,e.currentIndex=r;var o=t({scope:e,template:"/views/sample/modal/sampleModal.html",show:!1});switch(n){case"create":e.modalData={},e.modalData.readOnly=!1,o.$promise.then(o.show);break;case"show":e.read(a,function(t){"ERROR"!=t?(o.$promise.then(o.show),e.modalData=t,e.modalData.bCreate=JSON.parse(t.bCreate),e.modalData.readOnly=!0):toastr.warning("การอ่านข้อมูลผิดพลาด"+t,"การอ่านข้อมูลผิดพลาด")});break;case"edit":e.read(a,function(t){"ERROR"!=t?(o.$promise.then(o.show),e.modalData=t,e.modalData.bCreate=JSON.parse(t.bCreate),e.modalData.readOnly=!1):toastr.warning("การอ่านข้อมูลผิดพลาด"+t,"การอ่านข้อมูลผิดพลาด")})}}}])}(),function(){app.factory("sampleService",["$http","$q",function(e,t){var n={};return n.createSample=function(){spinner.show();var n=t.defer();return e({method:"GET",url:"/sample/create",contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),n.resolve(e)}).error(function(e){spinner.hide(),n.reject(e)}),n.promise},n.createNewSample=function(n){spinner.show();var a=t.defer();return e({method:"POST",url:"/sample/createnew",contentType:"application/json; charset=utf-8",data:{Name:n.Name,bCreate:n.bCreate},dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),a.resolve(e)}).error(function(e){spinner.hide(),a.reject(e)}),a.promise},n.readAllSample=function(){spinner.show();var n=t.defer();return e({method:"GET",url:"/sample/read",contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),n.resolve(e)}).error(function(e){spinner.hide(),n.reject(e)}),n.promise},n.deleteSample=function(n){spinner.show();var a=t.defer();return e({method:"GET",url:"/sample/delete/"+n,contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),a.resolve(e)}).error(function(e){spinner.hide(),a.reject(e)}),a.promise},n.readSample=function(n){spinner.show();var a=t.defer();return e({method:"GET",url:"/sample/read/"+n,contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),a.resolve(e)}).error(function(e){spinner.hide(),a.reject(e)}),a.promise},n.updateSample=function(n,a){spinner.show();var r=t.defer();return e({method:"POST",url:"/sample/update/"+a,data:{Name:n.Name,bCreate:n.bCreate},contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},n}])}(),function(){app.factory("searchEngineService",["$http","$q",function(e,t){var n={};return n.addKeyword=function(n){spinner.show();var a=t.defer();return console.log(n),e({method:"POST",url:"/searchengine/addKeyword",contentType:"application/json; charset=utf-8",data:n,dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),a.resolve(e)}).error(function(e){spinner.hide(),a.reject(e)}),a.promise},n}])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsbGphdmFzY3JpcHQuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJoYXNoUHJlZml4Iiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJzcGlubmVyIiwidG9rZW4iLCJ0b2FzdHIiLCJvcHRpb25zIiwiY2xvc2VCdXR0b24iLCJkZWJ1ZyIsInByb2dyZXNzQmFyIiwicG9zaXRpb25DbGFzcyIsIm9uY2xpY2siLCJzaG93RHVyYXRpb24iLCJoaWRlRHVyYXRpb24iLCJ0aW1lT3V0IiwiZXh0ZW5kZWRUaW1lT3V0Iiwic2hvd0Vhc2luZyIsImhpZGVFYXNpbmciLCJzaG93TWV0aG9kIiwiaGlkZU1ldGhvZCIsIm9wdFNwaW5lck1vZGFsIiwibGluZXMiLCJsZW5ndGgiLCJ3aWR0aCIsInJhZGl1cyIsImNvcm5lcnMiLCJyb3RhdGUiLCJjb2xvciIsInNwZWVkIiwidHJhaWwiLCJzaGFkb3ciLCJod2FjY2VsIiwiekluZGV4IiwidG9wIiwibGVmdCIsInNwaW5uZXJPYmoiLCJzaG93Iiwic3Bpbm5lcl9kaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiU3Bpbm5lciIsInNwaW4iLCIkIiwiYmxvY2tVSSIsIm1lc3NhZ2UiLCJvdmVybGF5Q1NTIiwiYmFja2dyb3VuZENvbG9yIiwiaGlkZSIsInN0b3AiLCJ1bmJsb2NrVUkiLCIkcm9vdFNjb3BlIiwiJHNjb3BlIiwicGFnZURhdGEiLCJOYW1lIiwiZGlyZWN0aXZlVGVzdCIsImltYWdlcyIsIm9uIiwiY2xpY2siLCJ0ZXh0IiwiZmlsZXMiLCJ0aGlzIiwiZ2V0IiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImkiLCJmaWxlIiwiYXBwZW5kIiwibmFtZSIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwiY3JvcHBlciIsImRlc3Ryb3kiLCJpbWFnZSIsInNyYyIsImluaXRtYWluTVQiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInVwbG9hZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJsZW5ndGhDb21wdXRhYmxlIiwicGVyY2VudENvbXBsZXRlIiwibG9hZGVkIiwidG90YWwiLCJwYXJzZUludCIsImh0bWwiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJyZXF1aXJlIiwic2NvcGUiLCJsaW5rIiwiZWxlbWVudCIsImF0dHIiLCJuZ01vZGVsIiwiJHJlbmRlciIsImVtcHR5IiwiJHZpZXdWYWx1ZSIsIkRhdGUiLCJwcm90b3R5cGUiLCJhZGRIb3VycyIsImgiLCJzZXRIb3VycyIsImdldEhvdXJzIiwiZmlsdGVyIiwiaW5wdXQiLCJEYXRlQ2FsIiwibWFpblNlcnZpY2UiLCJzZWFyY2hFbmdpbmVTZXJ2aWNlIiwiYWN0aXZlUGFnZSIsImluaXRNVCIsIkdldFNhbXBsZSIsInRoZW4iLCJ0ZXN0RGF0YSIsIlN1Ym1pdEtleXdvcmQiLCJhZGRLZXl3b3JkIiwia2V5d29yZHMiLCJpbnB1dGtleXdvcmRzIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsImRyYWdNb3ZlTGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsIngiLCJwYXJzZUZsb2F0IiwiZ2V0QXR0cmlidXRlIiwiZHgiLCJ5IiwiZHkiLCJzdHlsZSIsIndlYmtpdFRyYW5zZm9ybSIsInRyYW5zZm9ybSIsInNldEF0dHJpYnV0ZSIsInByZXZpZXdzIiwicXVlcnlTZWxlY3RvckFsbCIsIkNyb3BwZXIiLCJyZWFkeSIsInBhcmFtMSIsInBhcmFtMiIsImNsb25lIiwiY2xvbmVOb2RlIiwiY2xhc3NOYW1lIiwiY3NzVGV4dCIsImZvckVhY2giLCJlbGVtIiwiYXBwZW5kQ2hpbGQiLCJhc3BlY3RSYXRpbyIsImNyb3AiLCJlIiwiZGV0YWlsIiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwicHJldmlld0FzcGVjdFJhdGlvIiwiaGVpZ2h0IiwicHJldmlld0ltYWdlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpdGVtIiwicHJldmlld1dpZHRoIiwib2Zmc2V0V2lkdGgiLCJwcmV2aWV3SGVpZ2h0IiwiaW1hZ2VTY2FsZWRSYXRpbyIsIm5hdHVyYWxXaWR0aCIsIm5hdHVyYWxIZWlnaHQiLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwiaW50ZXJhY3QiLCJkcmFnZ2FibGUiLCJpbmVydGlhIiwicmVzdHJpY3Rpb24iLCJlbmRPbmx5IiwiZWxlbWVudFJlY3QiLCJib3R0b20iLCJyaWdodCIsImF1dG9TY3JvbGwiLCJvbm1vdmUiLCJvbmVuZCIsInRleHRFbCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsIk1hdGgiLCJzcXJ0Iiwid2luZG93IiwicmV0YXRlSW1hZ2UiLCJzaWRlIiwiZ2V0Q3JvcHBlZENhbnZhcyIsInRvQmxvYiIsImJsb2IiLCJtZXRob2QiLCJyZXNwb25zZSIsImltYWdlY3JvcCIsImVycm9yIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInBhcmVudCIsImZhY3RvcnkiLCIkaHR0cCIsIiRxIiwidGhpc2ZhY3QiLCJkZWZlciIsInJlc29sdmUiLCJlcnIiLCJyZWplY3QiLCJwcm9taXNlIiwiJG1vZGFsIiwic2FtcGxlU2VydmljZSIsInJlYWRTYW1wbGVEYXRhIiwiY3JlYXRlU2FtcGxlIiwicHVzaCIsIndhcm5pbmciLCJjcmVhdGVOZXdTYW1wbGUiLCJtb2RhbERhdGEiLCJyZWFkIiwiaWQiLCJjYiIsInJlYWRTYW1wbGUiLCJyZWFkQWxsU2FtcGxlIiwidXBkYXRlU2FtcGxlIiwiY3VycmVudElEIiwiaW5kZXgiLCJjdXJyZW50SW5kZXgiLCJkZWxldGVDb25maXJtIiwidGVtcGxhdGUiLCJkZWxldGVTYW1wbGUiLCJzcGxpY2UiLCJjaGVja0RhdGEiLCJtb2RhbE1vZGUiLCJzaG93U2FtcGxlIiwibXlPdGhlck1vZGFsIiwicmVhZE9ubHkiLCIkcHJvbWlzZSIsImJDcmVhdGUiLCJKU09OIiwicGFyc2UiLCJkYXRhVHlwZSIsImhlYWRlcnMiLCJSZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4iLCJvYmoiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLFNBQ0osV0FDUUEsSUFBTUMsUUFBUUMsT0FBTyxXQUFZLFVBQVcsYUFBYyxhQUFjLFlBQWEsbUJBQ3JGRixJQUFJRyxRQUFBLGlCQUFBLG9CQUFPLFNBQVVDLEVBQWdCQyxHQUNqQ0EsRUFBa0JDLFdBQVUsR0FBT0MsV0FBVyxLQUM5Q0gsRUFDQ0ksS0FBSyxLQUNGQyxZQUFhLG9CQUFxQkMsV0FBWSxhQUVqREYsS0FBSyxXQUNGQyxZQUFhLDRCQUE2QkMsV0FBWSxlQUN2REMsV0FDQ0MsV0FBWSxXQUs1QixJQUFJQyxZQUNBQyxNQUFRLE9BQ1osV0FDSUMsT0FBT0MsU0FDSEMsYUFBZSxFQUNmQyxPQUFTLEVBQ1RDLGFBQWUsRUFDZkMsY0FBaUIscUJBQ2pCQyxRQUFXLEtBQ1hDLGFBQWdCLE1BQ2hCQyxhQUFnQixPQUNoQkMsUUFBVyxPQUNYQyxnQkFBbUIsT0FDbkJDLFdBQWMsUUFDZEMsV0FBYyxTQUNkQyxXQUFjLFNBQ2RDLFdBQWMsVUFFbEIsSUFBSUMsSUFDQUMsTUFBTyxHQUNQQyxPQUFRLEdBQ1JDLE1BQU8sRUFDUEMsT0FBUSxHQUNSQyxRQUFTLEVBQ1RDLE9BQVEsRUFDUkMsTUFBTyxPQUNQQyxNQUFPLEVBQ1BDLE1BQU8sR0FDUEMsUUFBUSxFQUNSQyxTQUFTLEVBRVRDLE9BQVEsSUFDUkMsSUFBSyxNQUNMQyxLQUFNLE9BR05DLEVBQWEsSUFDakJoQyxTQUFRaUMsS0FBTyxXQUNYLEdBQUlDLEdBQWNDLFNBQVNDLGVBQWUsVUFDeEIsT0FBZEosRUFDQUEsRUFBYSxHQUFJSyxTQUFRcEIsR0FBZ0JxQixLQUFLSixHQUU5Q0YsRUFBV00sS0FBS0osR0FFcEJLLEVBQUVDLFNBQVNDLFFBQVMsS0FBTUMsWUFBYUMsZ0JBQWlCLGNBRzVEM0MsUUFBUTRDLEtBQU8sV0FDWCxH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LFFBQVE0QyxPQUNSNkosRUFBTUcsT0FBT3hJLEtBRVZxSSxFQUFNSSxTQUdWTCIsImZpbGUiOiJhbGxqYXZhc2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IHt9O1xuKGZ1bmN0aW9uKCkge1xuICAgICAgICBhcHAgPSBhbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIiwgWyduZ1JvdXRlJywgJ25nU2FuaXRpemUnLCAnbmdSZXNvdXJjZScsICduZ0FuaW1hdGUnLCAnbWdjcmVhLm5nU3RyYXAnXSk7XG4gICAgICAgIGFwcC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKGZhbHNlKS5oYXNoUHJlZml4KCchJyk7XG4gICAgICAgICAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAgICAgLndoZW4oXCIvXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2luZGV4Lmh0bWwnLCBjb250cm9sbGVyOiAnbWFpbkN0cmwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvc2FtcGxlXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3NhbXBsZS9zYW1wbGUuaHRtbCcsIGNvbnRyb2xsZXI6ICdzYW1wbGVDdHJsJ1xuICAgICAgICAgICAgfSkub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiBcIi9cIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbikoKTtcbnZhciBzcGlubmVyID0ge307XG52YXIgdG9rZW4gPSBcIlhYWFwiO1xuKGZ1bmN0aW9uKCkge1xuICAgIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICAgICBcImNsb3NlQnV0dG9uXCI6IGZhbHNlLFxuICAgICAgICBcImRlYnVnXCI6IGZhbHNlLFxuICAgICAgICBcInByb2dyZXNzQmFyXCI6IGZhbHNlLFxuICAgICAgICBcInBvc2l0aW9uQ2xhc3NcIjogXCJ0b2FzdC1ib3R0b20tcmlnaHRcIixcbiAgICAgICAgXCJvbmNsaWNrXCI6IG51bGwsXG4gICAgICAgIFwic2hvd0R1cmF0aW9uXCI6IFwiMzAwXCIsXG4gICAgICAgIFwiaGlkZUR1cmF0aW9uXCI6IFwiMTAwMFwiLFxuICAgICAgICBcInRpbWVPdXRcIjogXCI1MDAwXCIsXG4gICAgICAgIFwiZXh0ZW5kZWRUaW1lT3V0XCI6IFwiMTAwMFwiLFxuICAgICAgICBcInNob3dFYXNpbmdcIjogXCJzd2luZ1wiLFxuICAgICAgICBcImhpZGVFYXNpbmdcIjogXCJsaW5lYXJcIixcbiAgICAgICAgXCJzaG93TWV0aG9kXCI6IFwiZmFkZUluXCIsXG4gICAgICAgIFwiaGlkZU1ldGhvZFwiOiBcImZhZGVPdXRcIlxuICAgIH07XG4gICAgdmFyIG9wdFNwaW5lck1vZGFsID0ge1xuICAgICAgICBsaW5lczogMTEsIC8vIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gZHJhd1xuICAgICAgICBsZW5ndGg6IDIzLCAvLyBUaGUgbGVuZ3RoIG9mIGVhY2ggbGluZVxuICAgICAgICB3aWR0aDogOCwgLy8gVGhlIGxpbmUgdGhpY2tuZXNzXG4gICAgICAgIHJhZGl1czogNDAsIC8vIFRoZSByYWRpdXMgb2YgdGhlIGlubmVyIGNpcmNsZVxuICAgICAgICBjb3JuZXJzOiAxLCAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxuICAgICAgICByb3RhdGU6IDksIC8vIFRoZSByb3RhdGlvbiBvZmZzZXRcbiAgICAgICAgY29sb3I6ICcjRkZGJywgLy8gI3JnYiBvciAjcnJnZ2JiXG4gICAgICAgIHNwZWVkOiAxLCAvLyBSb3VuZHMgcGVyIHNlY29uZFxuICAgICAgICB0cmFpbDogNTAsIC8vIEFmdGVyZ2xvdyBwZXJjZW50YWdlXG4gICAgICAgIHNoYWRvdzogZmFsc2UsIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XG4gICAgICAgIGh3YWNjZWw6IHRydWUsIC8vIFdoZXRoZXIgdG8gdXNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvblxuICAgICAgICAvL2NsYXNzTmFtZTogJ3NwaW5uZXInLCAvLyBUaGUgQ1NTIGNsYXNzIHRvIGFzc2lnbiB0byB0aGUgc3Bpbm5lclxuICAgICAgICB6SW5kZXg6IDJlOSwgLy8gVGhlIHotaW5kZXggKGRlZmF1bHRzIHRvIDIwMDAwMDAwMDApXG4gICAgICAgIHRvcDogJzUwJScsIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnQgaW4gcHhcbiAgICAgICAgbGVmdDogJzUwJScgLy8gTGVmdCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnQgaW4gcHhcbiAgICB9O1xuXG4gICAgdmFyIHNwaW5uZXJPYmogPSBudWxsO1xuICAgIHNwaW5uZXIuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNwaW5uZXJfZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwaW5uZXInKTtcbiAgICAgICAgaWYgKHNwaW5uZXJPYmogPT0gbnVsbCkge1xuICAgICAgICAgICAgc3Bpbm5lck9iaiA9IG5ldyBTcGlubmVyKG9wdFNwaW5lck1vZGFsKS5zcGluKHNwaW5uZXJfZGl2KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNwaW5uZXJPYmouc3BpbihzcGlubmVyX2Rpdik7XG4gICAgICAgIH1cbiAgICAgICAgJC5ibG9ja1VJKHttZXNzYWdlOiBudWxsLCBvdmVybGF5Q1NTOiB7YmFja2dyb3VuZENvbG9yOiAnIzVjNWM1Yyd9fSk7XG4gICAgfVxuXG4gICAgc3Bpbm5lci5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3Bpbm5lcl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Bpbm5lcicpO1xuICAgICAgICBzcGlubmVyT2JqLnN0b3Aoc3Bpbm5lcl9kaXYpO1xuICAgICAgICAkLnVuYmxvY2tVSSgpO1xuICAgIH1cbn0pKCk7XG4oZnVuY3Rpb24gKCkge1xyXG4gICAgYXBwLmNvbnRyb2xsZXIoXCJnbG9iYWxDdHJsXCIsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUpIHtcclxuICAgICAgICAkc2NvcGUucGFnZURhdGEgPSBbXHJcbiAgICAgICAgICAgIHtOYW1lOiAnSG9tZSd9LFxyXG4gICAgICAgICAgICB7TmFtZTogJ1NhbXBsZSd9XHJcbiAgICAgICAgXTtcclxuICAgICAgICAkc2NvcGUuZGlyZWN0aXZlVGVzdCA9IFwiSEVMTE8gV09STERcIjtcclxuICAgICAgICAkcm9vdFNjb3BlLmltYWdlcyA9IFwiZXhhbXBsZWltYWdlLnBuZ1wiO1xyXG5cclxuICAgICAgICAkKCcudXBsb2FkLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnI3VwbG9hZC1pbnB1dCcpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICQoJy5wcm9ncmVzcy1iYXInKS50ZXh0KCcwJScpO1xyXG4gICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykud2lkdGgoJzAlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJyN1cGxvYWQtaW5wdXQnKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZmlsZXMgPSAkKHRoaXMpLmdldCgwKS5maWxlcztcclxuICAgICAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gZmlsZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd1cGxvYWRzW10nLCBmaWxlLCBmaWxlLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3VwbG9hZC8nLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuaW1hZ2VzID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5jcm9wcGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc3JjID0gXCJ1cGxvYWRzL1wiICsgJHJvb3RTY29wZS5pbWFnZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuaW5pdG1haW5NVCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeGhyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldnQubGVuZ3RoQ29tcHV0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwZXJjZW50Q29tcGxldGUgPSBldnQubG9hZGVkIC8gZXZ0LnRvdGFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRDb21wbGV0ZSA9IHBhcnNlSW50KHBlcmNlbnRDb21wbGV0ZSAqIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnByb2dyZXNzLWJhcicpLnRleHQocGVyY2VudENvbXBsZXRlICsgJyUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykud2lkdGgocGVyY2VudENvbXBsZXRlICsgJyUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVyY2VudENvbXBsZXRlID09PSAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnByb2dyZXNzLWJhcicpLmh0bWwoJ0RvbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHhocjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pKCk7XG4oZnVuY3Rpb24oKXtcbiAgICBhcHAuZGlyZWN0aXZlKCdkaXJlY3RpdmVTYW1wbGUnLGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBRUMnLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxuICAgICAgICAgICAgLy90ZW1wbGF0ZSA6IFwiXCIsXG4gICAgICAgICAgICAvL3RlbXBsYXRlVXJsIDogXCJcIixcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0ciwgbmdNb2RlbCkge1xuICAgICAgICAgICAgICAgIG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChuZ01vZGVsLiR2aWV3VmFsdWUpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XG4gICAgRGF0ZS5wcm90b3R5cGUuYWRkSG91cnM9IGZ1bmN0aW9uKGgpe1xuICAgICAgICB0aGlzLnNldEhvdXJzKHRoaXMuZ2V0SG91cnMoKStoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFwcC5maWx0ZXIoJ0RhdGVUcmljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgaWYgKGlucHV0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIERhdGVDYWwgPSBpbnB1dC5hZGRIb3Vycyg3KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0ZUNhbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcclxuICAgIGFwcC5jb250cm9sbGVyKFwibWFpbkN0cmxcIiwgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzY29wZSwgbWFpblNlcnZpY2UsIHNlYXJjaEVuZ2luZVNlcnZpY2UpIHtcclxuICAgICAgICAkc2NvcGUuYWN0aXZlUGFnZSA9IDE7IC8vIEhvbWVcclxuICAgICAgICAkc2NvcGUuaW5pdE1UID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtYWluU2VydmljZS5HZXRTYW1wbGUoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudGVzdERhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuU3VibWl0S2V5d29yZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VhcmNoRW5naW5lU2VydmljZS5hZGRLZXl3b3JkKHsga2V5d29yZHM6ICRzY29wZS5pbnB1dGtleXdvcmRzIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHJvb3RTY29wZS5pbml0bWFpbk1UID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0gaW5pdG1haW5NVCAtLS0tLS0tLS0tXCIpO1xyXG4gICAgICAgICAgICB2YXIgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltYWdlXCIpO1xyXG4gICAgICAgICAgICBpbWFnZS5zcmMgPSBcInVwbG9hZHMvXCIgKyAkcm9vdFNjb3BlLmltYWdlcztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaW1hZ2Uuc3JjKTtcclxuICAgICAgICAgICAgdmFyIHByZXZpZXdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcmV2aWV3XCIpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmNyb3BwZXIgPSBuZXcgQ3JvcHBlcihpbWFnZSwge1xyXG4gICAgICAgICAgICAgICAgcmVhZHk6IGZ1bmN0aW9uIChwYXJhbTEsIHBhcmFtMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZSA9IHRoaXMuY2xvbmVOb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUuY2xhc3NOYW1lID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5zdHlsZS5jc3NUZXh0ID0gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRpc3BsYXk6IGJsb2NrO1wiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aWR0aDogMTAwJTtcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWluLXdpZHRoOiAwO1wiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtaW4taGVpZ2h0OiAwO1wiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXgtd2lkdGg6IG5vbmU7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1heC1oZWlnaHQ6IG5vbmU7XCJcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwcmV2aWV3cywgZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChjbG9uZS5jbG9uZU5vZGUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYXNwZWN0UmF0aW86IDE2IC8gOSxcclxuICAgICAgICAgICAgICAgIGNyb3A6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBlLmRldGFpbDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3JvcHBlciA9IHRoaXMuY3JvcHBlcjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2VEYXRhID0gY3JvcHBlci5nZXRJbWFnZURhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlld0FzcGVjdFJhdGlvID0gZGF0YS53aWR0aCAvIGRhdGEuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwcmV2aWV3cywgZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlbGVtOiBcIiwgZWxlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aWV3SW1hZ2UgPSBlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW1nXCIpLml0ZW0oMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aWV3V2lkdGggPSBlbGVtLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlld0hlaWdodCA9IHByZXZpZXdXaWR0aCAvIHByZXZpZXdBc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlU2NhbGVkUmF0aW8gPSBkYXRhLndpZHRoIC8gcHJldmlld1dpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmhlaWdodCA9IHByZXZpZXdIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdJbWFnZS5zdHlsZS53aWR0aCA9IGltYWdlRGF0YS5uYXR1cmFsV2lkdGggLyBpbWFnZVNjYWxlZFJhdGlvICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gaW1hZ2VEYXRhLm5hdHVyYWxIZWlnaHQgLyBpbWFnZVNjYWxlZFJhdGlvICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUubWFyZ2luTGVmdCA9IC1kYXRhLnggLyBpbWFnZVNjYWxlZFJhdGlvICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUubWFyZ2luVG9wID0gLWRhdGEueSAvIGltYWdlU2NhbGVkUmF0aW8gKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ETyA6IERyYWdEcm9wLlxyXG4gICAgICAgICAgICAvLyB0YXJnZXQgZWxlbWVudHMgd2l0aCB0aGUgXCJkcmFnZ2FibGVcIiBjbGFzc1xyXG4gICAgICAgICAgICBpbnRlcmFjdCgnLmRyYWdnYWJsZScpXHJcbiAgICAgICAgICAgICAgICAuZHJhZ2dhYmxlKHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGUgaW5lcnRpYWwgdGhyb3dpbmdcclxuICAgICAgICAgICAgICAgICAgICBpbmVydGlhOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgdGhlIGVsZW1lbnQgd2l0aGluIHRoZSBhcmVhIG9mIGl0J3MgcGFyZW50XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdHJpY3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdHJpY3Rpb246IFwicGFyZW50XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZE9ubHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRSZWN0OiB7IHRvcDogMCwgbGVmdDogMCwgYm90dG9tOiAxLCByaWdodDogMSB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGUgYXV0b1Njcm9sbFxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9TY3JvbGw6IHRydWUsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgdGhpcyBmdW5jdGlvbiBvbiBldmVyeSBkcmFnbW92ZSBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgIG9ubW92ZTogZHJhZ01vdmVMaXN0ZW5lcixcclxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHRoaXMgZnVuY3Rpb24gb24gZXZlcnkgZHJhZ2VuZCBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgIG9uZW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHRFbCA9IGV2ZW50LnRhcmdldC5xdWVyeVNlbGVjdG9yKCdwJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0RWwgJiYgKHRleHRFbC50ZXh0Q29udGVudCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbW92ZWQgYSBkaXN0YW5jZSBvZiAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChNYXRoLnNxcnQoZXZlbnQuZHggKiBldmVudC5keCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuZHkgKiBldmVudC5keSkgfCAwKSArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZHJhZ01vdmVMaXN0ZW5lcihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBrZWVwIHRoZSBkcmFnZ2VkIHBvc2l0aW9uIGluIHRoZSBkYXRhLXgvZGF0YS15IGF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHBhcnNlRmxvYXQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS14JykpIHx8IDApICsgZXZlbnQuZHgsXHJcbiAgICAgICAgICAgICAgICAgICAgeSA9IChwYXJzZUZsb2F0KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpKSB8fCAwKSArIGV2ZW50LmR5O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9XHJcbiAgICAgICAgICAgICAgICAgICAgJ3RyYW5zbGF0ZSgnICsgeCArICdweCwgJyArIHkgKyAncHgpJztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHBvc2lpb24gYXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS14JywgeCk7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLXknLCB5KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdGhpcyBpcyB1c2VkIGxhdGVyIGluIHRoZSByZXNpemluZyBhbmQgZ2VzdHVyZSBkZW1vc1xyXG4gICAgICAgICAgICB3aW5kb3cuZHJhZ01vdmVMaXN0ZW5lciA9IGRyYWdNb3ZlTGlzdGVuZXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJldGF0ZUltYWdlID0gZnVuY3Rpb24gKHNpZGUpIHtcclxuICAgICAgICAgICAgaWYgKHNpZGUgPT09IFwibGVmdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmNyb3BwZXIucm90YXRlKC00NSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmNyb3BwZXIucm90YXRlKDQ1KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRDcm9wcGVkQ2FudmFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmNyb3BwZXIuZ2V0Q3JvcHBlZENhbnZhcyh7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTYwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA5MFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS5jcm9wcGVyLmdldENyb3BwZWRDYW52YXMoKS50b0Jsb2IoZnVuY3Rpb24gKGJsb2IpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiY3JvcHBlZEltYWdlXCIsIGJsb2IpO1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL3VwbG9hZC9nZXRDcm9wcC9cIixcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiLS0tLTogVXBsb2FkIHN1Y2Nlc3MgOi0tLS1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuaW1hZ2VzID0gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlY3JvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2Vjcm9wXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZWNyb3Auc3JjID0gXCJ1cGxvYWRzL1wiICsgcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVwbG9hZCBlcnJvclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gVE9ETyA6IEJsdW1hIE1vZGFsXHJcbiAgICAgICAgJChcIi5tb2RhbC1idXR0b25cIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5kYXRhKFwidGFyZ2V0XCIpO1xyXG4gICAgICAgICAgICAkKFwiaHRtbFwiKS5hZGRDbGFzcyhcImlzLWNsaXBwZWRcIik7XHJcbiAgICAgICAgICAgICQodGFyZ2V0KS5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIi5tb2RhbC1jbG9zZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoXCJodG1sXCIpLnJlbW92ZUNsYXNzKFwiaXMtY2xpcHBlZFwiKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImlzLWFjdGl2ZVwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKXtcbiAgICBhcHAuZmFjdG9yeSgnbWFpblNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsJHEpIHtcbiAgICAgICAgdmFyIHRoaXNmYWN0ID0ge307XG4gICAgICAgIHRoaXNmYWN0LkdldFNhbXBsZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzcGlubmVyLnNob3coKTtcbiAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAkaHR0cCh7bWV0aG9kOiAnR0VUJywgdXJsOiAnL3NhbXBsZSd9KS5cbiAgICAgICAgICAgICAgICBzdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0aGlzZmFjdDtcblxuICAgIH0pO1xufSkoKTtcbihmdW5jdGlvbigpIHtcbiAgICBhcHAuY29udHJvbGxlcignc2FtcGxlQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbCwgc2FtcGxlU2VydmljZSkge1xuICAgICAgICAkc2NvcGUuYWN0aXZlUGFnZSA9IDI7IC8vXCJTYW1wbGVcIjtcbiAgICAgICAgJHNjb3BlLnJlYWRTYW1wbGVEYXRhID0gW107XG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tIENyZWF0ZSBTZWN0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUuY3JlYXRlU2FtcGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2FtcGxlU2VydmljZS5jcmVhdGVTYW1wbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IFwiRVJST1JcIikge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2Vzcygn4LiB4Liy4Lij4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIJywgJ+C4geC4suC4o+C4muC4seC4meC4l+C4tuC4geC4guC5ieC4reC4oeC4ueC4pScpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZFNhbXBsZURhdGEucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguJrguLHguJnguJfguLbguIHguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lia4Lix4LiZ4LiX4Li24LiB4LiC4LmJ4Lit4Lih4Li54LilJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmNyZWF0ZU5ld1NhbXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNhbXBsZVNlcnZpY2UuY3JlYXRlTmV3U2FtcGxlKCRzY29wZS5tb2RhbERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJFUlJPUlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCfguIHguLLguKPguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgnLCAn4LiB4Liy4Lij4Lia4Lix4LiZ4LiX4Li24LiB4LiC4LmJ4Lit4Lih4Li54LilJyk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWFkU2FtcGxlRGF0YS5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4m+C4o+C4seC4muC4m+C4o+C4uOC4h+C4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguJvguKPguLHguJrguJvguKPguLjguIfguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLSBSZWFkIFNlY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUubW9kYWxEYXRhID0ge307XG4gICAgICAgICRzY29wZS5yZWFkID0gZnVuY3Rpb24gKGlkLCBjYikge1xuICAgICAgICAgICAgc2FtcGxlU2VydmljZS5yZWFkU2FtcGxlKGlkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjYihyZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnJlYWRBbGxTYW1wbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzYW1wbGVTZXJ2aWNlLnJlYWRBbGxTYW1wbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IFwiRVJST1JcIikge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZFNhbXBsZURhdGEgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4reC5iOC4suC4meC4guC5ieC4reC4oeC4ueC4peC4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguK3guYjguLLguJnguILguYnguK3guKHguLnguKXguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPIDogUGFnaW5hdGlvbiBTZXJ2ZXJzaWRlIFJlYWREYXRhXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAgIC8vLy0tLS0tLS0tLS0tLS0gVXBkYXRlIFNlY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgJHNjb3BlLnVwZGF0ZVNhbXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZCA9ICRzY29wZS5jdXJyZW50SUQ7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuY3VycmVudEluZGV4O1xuICAgICAgICAgICAgc2FtcGxlU2VydmljZS51cGRhdGVTYW1wbGUoJHNjb3BlLm1vZGFsRGF0YSwgaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJFUlJPUlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWFkU2FtcGxlRGF0YVtpbmRleF0gPSAkc2NvcGUubW9kYWxEYXRhO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguJvguKPguLHguJrguJvguKPguLjguIfguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lib4Lij4Lix4Lia4Lib4Lij4Li44LiH4Lic4Li04LiU4Lie4Lil4Liy4LiUJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICAvLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLSBEZWxldGUgU2VjdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUuZGVsZXRlQ29uZmlybSA9IGZ1bmN0aW9uIChpZCwgaW5kZXgpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50SUQgPSBpZDtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICRtb2RhbCh7c2NvcGU6ICRzY29wZSwgdGVtcGxhdGU6ICcvdmlld3Mvc2FtcGxlL21vZGFsL3NhbXBsZUNvbmZpcm0uaHRtbCcsIHNob3c6IHRydWV9KTtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmRlbGV0ZVNhbXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZCA9ICRzY29wZS5jdXJyZW50SUQ7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuY3VycmVudEluZGV4O1xuXG4gICAgICAgICAgICBzYW1wbGVTZXJ2aWNlLmRlbGV0ZVNhbXBsZShpZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIkVSUk9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlYWRTYW1wbGVEYXRhLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4peC4muC4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguKXguJrguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICAvLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0gT3RoZXIgU2VjdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUuY2hlY2tEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc3dpdGNoICgkc2NvcGUubW9kYWxNb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNyZWF0ZVwiIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNyZWF0ZU5ld1NhbXBsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZWRpdFwiIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZVNhbXBsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuc2hvd1NhbXBsZSA9IGZ1bmN0aW9uICh0eXBlLCBpZCwgaW5kZXgpIHtcbiAgICAgICAgICAgICRzY29wZS5tb2RhbE1vZGUgPSB0eXBlO1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRJRCA9IGlkO1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgdmFyIG15T3RoZXJNb2RhbCA9ICRtb2RhbCh7c2NvcGU6ICRzY29wZSwgdGVtcGxhdGU6ICcvdmlld3Mvc2FtcGxlL21vZGFsL3NhbXBsZU1vZGFsLmh0bWwnLCBzaG93OiBmYWxzZX0pO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdjcmVhdGUnIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIG15T3RoZXJNb2RhbC4kcHJvbWlzZS50aGVuKG15T3RoZXJNb2RhbC5zaG93KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hvdycgOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZChpZCwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIkVSUk9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteU90aGVyTW9kYWwuJHByb21pc2UudGhlbihteU90aGVyTW9kYWwuc2hvdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLmJDcmVhdGUgPSBKU09OLnBhcnNlKHJlc3VsdC5iQ3JlYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4reC5iOC4suC4meC4guC5ieC4reC4oeC4ueC4peC4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguK3guYjguLLguJnguILguYnguK3guKHguLnguKXguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZWRpdCcgOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZChpZCwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIkVSUk9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteU90aGVyTW9kYWwuJHByb21pc2UudGhlbihteU90aGVyTW9kYWwuc2hvdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLmJDcmVhdGUgPSBKU09OLnBhcnNlKHJlc3VsdC5iQ3JlYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguK3guYjguLLguJnguILguYnguK3guKHguLnguKXguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lit4LmI4Liy4LiZ4LiC4LmJ4Lit4Lih4Li54Lil4Lic4Li04LiU4Lie4Lil4Liy4LiUJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKCl7XG4gICAgYXBwLmZhY3RvcnkoJ3NhbXBsZVNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsJHEpIHtcbiAgICAgICAgdmFyIHRoaXNmYWN0ID0ge307XG4gICAgICAgIHRoaXNmYWN0LmNyZWF0ZVNhbXBsZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzcGlubmVyLnNob3coKTtcbiAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvY3JlYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpc2ZhY3QuY3JlYXRlTmV3U2FtcGxlID0gZnVuY3Rpb24ob2JqKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvY3JlYXRlbmV3JyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHsgTmFtZTogb2JqLk5hbWUsIGJDcmVhdGU6IG9iai5iQ3JlYXRlfSxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXNmYWN0LnJlYWRBbGxTYW1wbGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICRodHRwKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3NhbXBsZS9yZWFkJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpc2ZhY3QuZGVsZXRlU2FtcGxlID0gZnVuY3Rpb24oaWQpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3NhbXBsZS9kZWxldGUvJytpZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpc2ZhY3QucmVhZFNhbXBsZSA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvcmVhZC8nK2lkLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuJzogdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzZmFjdC51cGRhdGVTYW1wbGUgPSBmdW5jdGlvbihvYmosaWQpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3NhbXBsZS91cGRhdGUvJytpZCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBOYW1lOiBvYmouTmFtZSwgYkNyZWF0ZTogb2JqLmJDcmVhdGV9LFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuJzogdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdGhpc2ZhY3Q7XG5cbiAgICB9KTtcbn0pKCk7XG4oZnVuY3Rpb24oKXtcbiAgICBhcHAuZmFjdG9yeSgnc2VhcmNoRW5naW5lU2VydmljZScsIGZ1bmN0aW9uICgkaHR0cCwkcSkge1xuICAgICAgICB2YXIgdGhpc2ZhY3QgPSB7fTtcbiAgICAgICAgdGhpc2ZhY3QuYWRkS2V5d29yZCA9IGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2VhcmNoZW5naW5lL2FkZEtleXdvcmQnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgICAgICAgICAgICAgZGF0YSA6IGRhdGEsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdSZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4nOiB0b2tlblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdGhpc2ZhY3Q7XG4gICAgfSk7XG59KSgpOyJdfQ==
