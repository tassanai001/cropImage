var app={};!function(){app=angular.module("MainApp",["ngRoute","ngSanitize","ngResource","ngAnimate","mgcrea.ngStrap"]),app.config(["$routeProvider","$locationProvider",function(e,t){t.html5Mode(!1).hashPrefix("!"),e.when("/",{templateUrl:"/views/index.html",controller:"mainCtrl"}).when("/sample",{templateUrl:"/views/sample/sample.html",controller:"sampleCtrl"}).otherwise({redirectTo:"/"})}])}();var spinner={},token="XXX";!function(){toastr.options={closeButton:!1,debug:!1,progressBar:!1,positionClass:"toast-bottom-right",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var e={lines:11,length:23,width:8,radius:40,corners:1,rotate:9,color:"#FFF",speed:1,trail:50,shadow:!1,hwaccel:!0,zIndex:2e9,top:"50%",left:"50%"},t=null;spinner.show=function(){var n=document.getElementById("spinner");null==t?t=new Spinner(e).spin(n):t.spin(n),$.blockUI({message:null,overlayCSS:{backgroundColor:"#5c5c5c"}})},spinner.hide=function(){var e=document.getElementById("spinner");t.stop(e),$.unblockUI()}}(),function(){app.controller("globalCtrl",["$rootScope","$scope",function(e,t){t.pageData=[{Name:"Home"},{Name:"Sample"}],t.directiveTest="HELLO WORLD",e.images="exampleimage.png",$(".upload-btn").on("click",function(){$("#upload-input").click(),$(".progress-bar").text("0%"),$(".progress-bar").width("0%")}),$("#upload-input").on("change",function(){var t=$(this).get(0).files;if(t.length>0){for(var n=new FormData,a=0;a<t.length;a++){var r=t[a];n.append("uploads[]",r,r.name)}$.ajax({url:"/upload/",type:"POST",data:n,processData:!1,contentType:!1,success:function(t){e.images=t,e.cropper.destroy();var n=document.getElementById("image");n.src="uploads/"+e.images,e.initmainMT()},xhr:function(){var e=new XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;t=parseInt(100*t),$(".progress-bar").text(t+"%"),$(".progress-bar").width(t+"%"),100===t&&$(".progress-bar").html("Done")}},!1),e}})}})}])}(),function(){app.directive("directiveSample",function(){return{restrict:"AEC",replace:!0,require:"ngModel",scope:!0,link:function(e,t,n,a){a.$render=function(){t.empty(),t.append(a.$viewValue)}}}})}(),function(){Date.prototype.addHours=function(e){return this.setHours(this.getHours()+e),this},app.filter("DateTrick",function(){return function(e){if(null!==e){var t=e.addHours(7);return t}return{}}})}(),function(){app.controller("mainCtrl",["$rootScope","$scope","mainService","searchEngineService",function(e,t,n,a){t.activePage=1,t.initMT=function(){n.GetSample().then(function(e){t.testData=e})},t.SubmitKeyword=function(){a.addKeyword({keywords:t.inputkeywords}).then(function(e){console.log(e)})},e.initmainMT=function(){console.log("---------- initmainMT ----------");var t=document.getElementById("image");t.src="uploads/"+e.images;var n=document.querySelectorAll(".preview");e.cropper=new Cropper(t,{ready:function(e,t){var a=this.cloneNode();a.className="",a.style.cssText="display: block;width: 100%;min-width: 0;min-height: 0;max-width: none;max-height: none;",angular.forEach(n,function(e){e.appendChild(a.cloneNode())})},aspectRatio:16/9,crop:function(e){var t=e.detail,a=this.cropper,r=a.getImageData(),o=t.width/t.height;angular.forEach(n,function(e){console.log("elem: ",e);var n=e.getElementsByTagName("img").item(0),a=e.offsetWidth,i=a/o,s=t.width/a;e.style.height=i+"px",n.style.width=r.naturalWidth/s+"px",n.style.height=r.naturalHeight/s+"px",n.style.marginLeft=-t.x/s+"px",n.style.marginTop=-t.y/s+"px"})}})},t.retateImage=function(t){"left"===t?e.cropper.rotate(-45):e.cropper.rotate(45)},t.getCroppedCanvas=function(){e.cropper.getCroppedCanvas({width:160,height:90}),e.cropper.getCroppedCanvas().toBlob(function(t){var n=new FormData;n.append("croppedImage",t),$.ajax({url:"/upload/getCropp/",method:"POST",data:n,processData:!1,contentType:!1,success:function(t){console.log("----: Upload success :----"),e.images=t,console.log(t);var n=document.getElementById("imagecrop");n.src="uploads/"+t},error:function(){console.log("Upload error")}})})},$(".modal-button").click(function(){var e=$(this).data("target");$("html").addClass("is-clipped"),$(e).addClass("is-active")}),$(".modal-close").click(function(){$("html").removeClass("is-clipped"),$(this).parent().removeClass("is-active")})}])}(),function(){app.factory("mainService",["$http","$q",function(e,t){var n={};return n.GetSample=function(){spinner.show();var n=t.defer();return e({method:"GET",url:"/sample"}).success(function(e){spinner.hide(),n.resolve(e)}).error(function(e){spinner.hide(),n.reject(e)}),n.promise},n}])}(),function(){app.controller("sampleCtrl",["$scope","$modal","sampleService",function(e,t,n){e.activePage=2,e.readSampleData=[],e.createSample=function(){n.createSample().then(function(t){"ERROR"!=t?(toastr.success("การบันทึกสำเร็จ","การบันทึกข้อมูล"),e.readSampleData.push(t)):toastr.warning("การบันทึกผิดพลาด"+t,"การบันทึกข้อมูล")})},e.createNewSample=function(){n.createNewSample(e.modalData).then(function(t){"ERROR"!=t?(toastr.success("การบันทึกสำเร็จ","การบันทึกข้อมูล"),e.readSampleData.push(t)):toastr.warning("การปรับปรุงผิดพลาด"+t,"การปรับปรุงผิดพลาด")})},e.modalData={},e.read=function(e,t){n.readSample(e).then(function(e){t(e)})},e.readAllSample=function(){n.readAllSample().then(function(t){"ERROR"!=t?e.readSampleData=t:toastr.warning("การอ่านข้อมูลผิดพลาด"+t,"การอ่านข้อมูลผิดพลาด")})},e.updateSample=function(){var t=e.currentID,a=e.currentIndex;n.updateSample(e.modalData,t).then(function(t){"ERROR"!=t?e.readSampleData[a]=e.modalData:toastr.warning("การปรับปรุงผิดพลาด"+t,"การปรับปรุงผิดพลาด")})},e.deleteConfirm=function(n,a){e.currentID=n,e.currentIndex=a,t({scope:e,template:"/views/sample/modal/sampleConfirm.html",show:!0})},e.deleteSample=function(){var t=e.currentID,a=e.currentIndex;n.deleteSample(t).then(function(t){"ERROR"!=t?e.readSampleData.splice(a,1):toastr.warning("การลบผิดพลาด"+t,"การลบผิดพลาด")})},e.checkData=function(){switch(e.modalMode){case"create":e.createNewSample();break;case"edit":e.updateSample()}},e.showSample=function(n,a,r){e.modalMode=n,e.currentID=a,e.currentIndex=r;var o=t({scope:e,template:"/views/sample/modal/sampleModal.html",show:!1});switch(n){case"create":e.modalData={},e.modalData.readOnly=!1,o.$promise.then(o.show);break;case"show":e.read(a,function(t){"ERROR"!=t?(o.$promise.then(o.show),e.modalData=t,e.modalData.bCreate=JSON.parse(t.bCreate),e.modalData.readOnly=!0):toastr.warning("การอ่านข้อมูลผิดพลาด"+t,"การอ่านข้อมูลผิดพลาด")});break;case"edit":e.read(a,function(t){"ERROR"!=t?(o.$promise.then(o.show),e.modalData=t,e.modalData.bCreate=JSON.parse(t.bCreate),e.modalData.readOnly=!1):toastr.warning("การอ่านข้อมูลผิดพลาด"+t,"การอ่านข้อมูลผิดพลาด")})}}}])}(),function(){app.factory("sampleService",["$http","$q",function(e,t){var n={};return n.createSample=function(){spinner.show();var n=t.defer();return e({method:"GET",url:"/sample/create",contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),n.resolve(e)}).error(function(e){spinner.hide(),n.reject(e)}),n.promise},n.createNewSample=function(n){spinner.show();var a=t.defer();return e({method:"POST",url:"/sample/createnew",contentType:"application/json; charset=utf-8",data:{Name:n.Name,bCreate:n.bCreate},dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),a.resolve(e)}).error(function(e){spinner.hide(),a.reject(e)}),a.promise},n.readAllSample=function(){spinner.show();var n=t.defer();return e({method:"GET",url:"/sample/read",contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),n.resolve(e)}).error(function(e){spinner.hide(),n.reject(e)}),n.promise},n.deleteSample=function(n){spinner.show();var a=t.defer();return e({method:"GET",url:"/sample/delete/"+n,contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),a.resolve(e)}).error(function(e){spinner.hide(),a.reject(e)}),a.promise},n.readSample=function(n){spinner.show();var a=t.defer();return e({method:"GET",url:"/sample/read/"+n,contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),a.resolve(e)}).error(function(e){spinner.hide(),a.reject(e)}),a.promise},n.updateSample=function(n,a){spinner.show();var r=t.defer();return e({method:"POST",url:"/sample/update/"+a,data:{Name:n.Name,bCreate:n.bCreate},contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},n}])}(),function(){app.factory("searchEngineService",["$http","$q",function(e,t){var n={};return n.addKeyword=function(n){spinner.show();var a=t.defer();return console.log(n),e({method:"POST",url:"/searchengine/addKeyword",contentType:"application/json; charset=utf-8",data:n,dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),a.resolve(e)}).error(function(e){spinner.hide(),a.reject(e)}),a.promise},n}])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsbGphdmFzY3JpcHQuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJoYXNoUHJlZml4Iiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJzcGlubmVyIiwidG9rZW4iLCJ0b2FzdHIiLCJvcHRpb25zIiwiY2xvc2VCdXR0b24iLCJkZWJ1ZyIsInByb2dyZXNzQmFyIiwicG9zaXRpb25DbGFzcyIsIm9uY2xpY2siLCJzaG93RHVyYXRpb24iLCJoaWRlRHVyYXRpb24iLCJ0aW1lT3V0IiwiZXh0ZW5kZWRUaW1lT3V0Iiwic2hvd0Vhc2luZyIsImhpZGVFYXNpbmciLCJzaG93TWV0aG9kIiwiaGlkZU1ldGhvZCIsIm9wdFNwaW5lck1vZGFsIiwibGluZXMiLCJsZW5ndGgiLCJ3aWR0aCIsInJhZGl1cyIsImNvcm5lcnMiLCJyb3RhdGUiLCJjb2xvciIsInNwZWVkIiwidHJhaWwiLCJzaGFkb3ciLCJod2FjY2VsIiwiekluZGV4IiwidG9wIiwibGVmdCIsInNwaW5uZXJPYmoiLCJzaG93Iiwic3Bpbm5lcl9kaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiU3Bpbm5lciIsInNwaW4iLCIkIiwiYmxvY2tVSSIsIm1lc3NhZ2UiLCJvdmVybGF5Q1NTIiwiYmFja2dyb3VuZENvbG9yIiwiaGlkZSIsInN0b3AiLCJ1bmJsb2NrVUkiLCIkcm9vdFNjb3BlIiwiJHNjb3BlIiwicGFnZURhdGEiLCJOYW1lIiwiZGlyZWN0aXZlVGVzdCIsImltYWdlcyIsIm9uIiwiY2xpY2siLCJ0ZXh0IiwiZmlsZXMiLCJ0aGlzIiwiZ2V0IiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImkiLCJmaWxlIiwiYXBwZW5kIiwibmFtZSIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwiY3JvcHBlciIsImRlc3Ryb3kiLCJpbWFnZSIsInNyYyIsImluaXRtYWluTVQiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInVwbG9hZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJsZW5ndGhDb21wdXRhYmxlIiwicGVyY2VudENvbXBsZXRlIiwibG9hZGVkIiwidG90YWwiLCJwYXJzZUludCIsImh0bWwiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJyZXF1aXJlIiwic2NvcGUiLCJsaW5rIiwiZWxlbWVudCIsImF0dHIiLCJuZ01vZGVsIiwiJHJlbmRlciIsImVtcHR5IiwiJHZpZXdWYWx1ZSIsIkRhdGUiLCJwcm90b3R5cGUiLCJhZGRIb3VycyIsImgiLCJzZXRIb3VycyIsImdldEhvdXJzIiwiZmlsdGVyIiwiaW5wdXQiLCJEYXRlQ2FsIiwibWFpblNlcnZpY2UiLCJzZWFyY2hFbmdpbmVTZXJ2aWNlIiwiYWN0aXZlUGFnZSIsImluaXRNVCIsIkdldFNhbXBsZSIsInRoZW4iLCJ0ZXN0RGF0YSIsIlN1Ym1pdEtleXdvcmQiLCJhZGRLZXl3b3JkIiwia2V5d29yZHMiLCJpbnB1dGtleXdvcmRzIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsInByZXZpZXdzIiwicXVlcnlTZWxlY3RvckFsbCIsIkNyb3BwZXIiLCJyZWFkeSIsInBhcmFtMSIsInBhcmFtMiIsImNsb25lIiwiY2xvbmVOb2RlIiwiY2xhc3NOYW1lIiwic3R5bGUiLCJjc3NUZXh0IiwiZm9yRWFjaCIsImVsZW0iLCJhcHBlbmRDaGlsZCIsImFzcGVjdFJhdGlvIiwiY3JvcCIsImUiLCJkZXRhaWwiLCJpbWFnZURhdGEiLCJnZXRJbWFnZURhdGEiLCJwcmV2aWV3QXNwZWN0UmF0aW8iLCJoZWlnaHQiLCJwcmV2aWV3SW1hZ2UiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIml0ZW0iLCJwcmV2aWV3V2lkdGgiLCJvZmZzZXRXaWR0aCIsInByZXZpZXdIZWlnaHQiLCJpbWFnZVNjYWxlZFJhdGlvIiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsIm1hcmdpbkxlZnQiLCJ4IiwibWFyZ2luVG9wIiwieSIsInJldGF0ZUltYWdlIiwic2lkZSIsImdldENyb3BwZWRDYW52YXMiLCJ0b0Jsb2IiLCJibG9iIiwibWV0aG9kIiwicmVzcG9uc2UiLCJpbWFnZWNyb3AiLCJlcnJvciIsInRhcmdldCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJwYXJlbnQiLCJmYWN0b3J5IiwiJGh0dHAiLCIkcSIsInRoaXNmYWN0IiwiZGVmZXIiLCJyZXNvbHZlIiwiZXJyIiwicmVqZWN0IiwicHJvbWlzZSIsIiRtb2RhbCIsInNhbXBsZVNlcnZpY2UiLCJyZWFkU2FtcGxlRGF0YSIsImNyZWF0ZVNhbXBsZSIsInB1c2giLCJ3YXJuaW5nIiwiY3JlYXRlTmV3U2FtcGxlIiwibW9kYWxEYXRhIiwicmVhZCIsImlkIiwiY2IiLCJyZWFkU2FtcGxlIiwicmVhZEFsbFNhbXBsZSIsInVwZGF0ZVNhbXBsZSIsImN1cnJlbnRJRCIsImluZGV4IiwiY3VycmVudEluZGV4IiwiZGVsZXRlQ29uZmlybSIsInRlbXBsYXRlIiwiZGVsZXRlU2FtcGxlIiwic3BsaWNlIiwiY2hlY2tEYXRhIiwibW9kYWxNb2RlIiwic2hvd1NhbXBsZSIsIm15T3RoZXJNb2RhbCIsInJlYWRPbmx5IiwiJHByb21pc2UiLCJiQ3JlYXRlIiwiSlNPTiIsInBhcnNlIiwiZGF0YVR5cGUiLCJoZWFkZXJzIiwiUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuIiwib2JqIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxTQUNKLFdBQ1FBLElBQU1DLFFBQVFDLE9BQU8sV0FBWSxVQUFXLGFBQWMsYUFBYyxZQUFhLG1CQUNyRkYsSUFBSUcsUUFBQSxpQkFBQSxvQkFBTyxTQUFVQyxFQUFnQkMsR0FDakNBLEVBQWtCQyxXQUFVLEdBQU9DLFdBQVcsS0FDOUNILEVBQ0NJLEtBQUssS0FDRkMsWUFBYSxvQkFBcUJDLFdBQVks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R0FDZHBFLFFBQVE0QyxPQUNSbUksRUFBTUcsT0FBTzlHLEtBRVYyRyxFQUFNSSxTQUdWTCIsImZpbGUiOiJhbGxqYXZhc2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IHt9O1xuKGZ1bmN0aW9uKCkge1xuICAgICAgICBhcHAgPSBhbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIiwgWyduZ1JvdXRlJywgJ25nU2FuaXRpemUnLCAnbmdSZXNvdXJjZScsICduZ0FuaW1hdGUnLCAnbWdjcmVhLm5nU3RyYXAnXSk7XG4gICAgICAgIGFwcC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKGZhbHNlKS5oYXNoUHJlZml4KCchJyk7XG4gICAgICAgICAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAgICAgLndoZW4oXCIvXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2luZGV4Lmh0bWwnLCBjb250cm9sbGVyOiAnbWFpbkN0cmwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvc2FtcGxlXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3NhbXBsZS9zYW1wbGUuaHRtbCcsIGNvbnRyb2xsZXI6ICdzYW1wbGVDdHJsJ1xuICAgICAgICAgICAgfSkub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiBcIi9cIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbikoKTtcbnZhciBzcGlubmVyID0ge307XG52YXIgdG9rZW4gPSBcIlhYWFwiO1xuKGZ1bmN0aW9uKCkge1xuICAgIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICAgICBcImNsb3NlQnV0dG9uXCI6IGZhbHNlLFxuICAgICAgICBcImRlYnVnXCI6IGZhbHNlLFxuICAgICAgICBcInByb2dyZXNzQmFyXCI6IGZhbHNlLFxuICAgICAgICBcInBvc2l0aW9uQ2xhc3NcIjogXCJ0b2FzdC1ib3R0b20tcmlnaHRcIixcbiAgICAgICAgXCJvbmNsaWNrXCI6IG51bGwsXG4gICAgICAgIFwic2hvd0R1cmF0aW9uXCI6IFwiMzAwXCIsXG4gICAgICAgIFwiaGlkZUR1cmF0aW9uXCI6IFwiMTAwMFwiLFxuICAgICAgICBcInRpbWVPdXRcIjogXCI1MDAwXCIsXG4gICAgICAgIFwiZXh0ZW5kZWRUaW1lT3V0XCI6IFwiMTAwMFwiLFxuICAgICAgICBcInNob3dFYXNpbmdcIjogXCJzd2luZ1wiLFxuICAgICAgICBcImhpZGVFYXNpbmdcIjogXCJsaW5lYXJcIixcbiAgICAgICAgXCJzaG93TWV0aG9kXCI6IFwiZmFkZUluXCIsXG4gICAgICAgIFwiaGlkZU1ldGhvZFwiOiBcImZhZGVPdXRcIlxuICAgIH07XG4gICAgdmFyIG9wdFNwaW5lck1vZGFsID0ge1xuICAgICAgICBsaW5lczogMTEsIC8vIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gZHJhd1xuICAgICAgICBsZW5ndGg6IDIzLCAvLyBUaGUgbGVuZ3RoIG9mIGVhY2ggbGluZVxuICAgICAgICB3aWR0aDogOCwgLy8gVGhlIGxpbmUgdGhpY2tuZXNzXG4gICAgICAgIHJhZGl1czogNDAsIC8vIFRoZSByYWRpdXMgb2YgdGhlIGlubmVyIGNpcmNsZVxuICAgICAgICBjb3JuZXJzOiAxLCAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxuICAgICAgICByb3RhdGU6IDksIC8vIFRoZSByb3RhdGlvbiBvZmZzZXRcbiAgICAgICAgY29sb3I6ICcjRkZGJywgLy8gI3JnYiBvciAjcnJnZ2JiXG4gICAgICAgIHNwZWVkOiAxLCAvLyBSb3VuZHMgcGVyIHNlY29uZFxuICAgICAgICB0cmFpbDogNTAsIC8vIEFmdGVyZ2xvdyBwZXJjZW50YWdlXG4gICAgICAgIHNoYWRvdzogZmFsc2UsIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XG4gICAgICAgIGh3YWNjZWw6IHRydWUsIC8vIFdoZXRoZXIgdG8gdXNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvblxuICAgICAgICAvL2NsYXNzTmFtZTogJ3NwaW5uZXInLCAvLyBUaGUgQ1NTIGNsYXNzIHRvIGFzc2lnbiB0byB0aGUgc3Bpbm5lclxuICAgICAgICB6SW5kZXg6IDJlOSwgLy8gVGhlIHotaW5kZXggKGRlZmF1bHRzIHRvIDIwMDAwMDAwMDApXG4gICAgICAgIHRvcDogJzUwJScsIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnQgaW4gcHhcbiAgICAgICAgbGVmdDogJzUwJScgLy8gTGVmdCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnQgaW4gcHhcbiAgICB9O1xuXG4gICAgdmFyIHNwaW5uZXJPYmogPSBudWxsO1xuICAgIHNwaW5uZXIuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNwaW5uZXJfZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwaW5uZXInKTtcbiAgICAgICAgaWYgKHNwaW5uZXJPYmogPT0gbnVsbCkge1xuICAgICAgICAgICAgc3Bpbm5lck9iaiA9IG5ldyBTcGlubmVyKG9wdFNwaW5lck1vZGFsKS5zcGluKHNwaW5uZXJfZGl2KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNwaW5uZXJPYmouc3BpbihzcGlubmVyX2Rpdik7XG4gICAgICAgIH1cbiAgICAgICAgJC5ibG9ja1VJKHttZXNzYWdlOiBudWxsLCBvdmVybGF5Q1NTOiB7YmFja2dyb3VuZENvbG9yOiAnIzVjNWM1Yyd9fSk7XG4gICAgfVxuXG4gICAgc3Bpbm5lci5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3Bpbm5lcl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Bpbm5lcicpO1xuICAgICAgICBzcGlubmVyT2JqLnN0b3Aoc3Bpbm5lcl9kaXYpO1xuICAgICAgICAkLnVuYmxvY2tVSSgpO1xuICAgIH1cbn0pKCk7XG4oZnVuY3Rpb24gKCkge1xuICAgIGFwcC5jb250cm9sbGVyKFwiZ2xvYmFsQ3RybFwiLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS5wYWdlRGF0YSA9IFtcbiAgICAgICAgICAgIHtOYW1lOiAnSG9tZSd9LFxuICAgICAgICAgICAge05hbWU6ICdTYW1wbGUnfVxuICAgICAgICBdO1xuICAgICAgICAkc2NvcGUuZGlyZWN0aXZlVGVzdCA9IFwiSEVMTE8gV09STERcIjtcbiAgICAgICAgJHJvb3RTY29wZS5pbWFnZXMgPSBcImV4YW1wbGVpbWFnZS5wbmdcIjtcblxuICAgICAgICAkKCcudXBsb2FkLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJyN1cGxvYWQtaW5wdXQnKS5jbGljaygpO1xuICAgICAgICAgICAgJCgnLnByb2dyZXNzLWJhcicpLnRleHQoJzAlJyk7XG4gICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykud2lkdGgoJzAlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJyN1cGxvYWQtaW5wdXQnKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZpbGVzID0gJCh0aGlzKS5nZXQoMCkuZmlsZXM7XG4gICAgICAgICAgICBpZiAoZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBmaWxlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd1cGxvYWRzW10nLCBmaWxlLCBmaWxlLm5hbWUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy91cGxvYWQvJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBmb3JtRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmltYWdlcyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmNyb3BwZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLnNyYyA9IFwidXBsb2Fkcy9cIiArICRyb290U2NvcGUuaW1hZ2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pbml0bWFpbk1UKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHhocjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0Lmxlbmd0aENvbXB1dGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRDb21wbGV0ZSA9IGV2dC5sb2FkZWQgLyBldnQudG90YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRDb21wbGV0ZSA9IHBhcnNlSW50KHBlcmNlbnRDb21wbGV0ZSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzcy1iYXInKS50ZXh0KHBlcmNlbnRDb21wbGV0ZSArICclJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzcy1iYXInKS53aWR0aChwZXJjZW50Q29tcGxldGUgKyAnJScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVyY2VudENvbXBsZXRlID09PSAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzcy1iYXInKS5odG1sKCdEb25lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geGhyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoKTtcbihmdW5jdGlvbigpe1xuICAgIGFwcC5kaXJlY3RpdmUoJ2RpcmVjdGl2ZVNhbXBsZScsZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0FFQycsXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgICAgICAvL3RlbXBsYXRlIDogXCJcIixcbiAgICAgICAgICAgIC8vdGVtcGxhdGVVcmwgOiBcIlwiLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBuZ01vZGVsKSB7XG4gICAgICAgICAgICAgICAgbmdNb2RlbC4kcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKG5nTW9kZWwuJHZpZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSkoKTtcbihmdW5jdGlvbigpIHtcbiAgICBEYXRlLnByb3RvdHlwZS5hZGRIb3Vycz0gZnVuY3Rpb24oaCl7XG4gICAgICAgIHRoaXMuc2V0SG91cnModGhpcy5nZXRIb3VycygpK2gpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgYXBwLmZpbHRlcignRGF0ZVRyaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgRGF0ZUNhbCA9IGlucHV0LmFkZEhvdXJzKDcpO1xuICAgICAgICAgICAgICAgIHJldHVybiBEYXRlQ2FsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKCk7XG4oZnVuY3Rpb24gKCkge1xuICAgIGFwcC5jb250cm9sbGVyKFwibWFpbkN0cmxcIiwgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzY29wZSwgbWFpblNlcnZpY2UsIHNlYXJjaEVuZ2luZVNlcnZpY2UpIHtcbiAgICAgICAgJHNjb3BlLmFjdGl2ZVBhZ2UgPSAxOyAvLyBIb21lXG4gICAgICAgICRzY29wZS5pbml0TVQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtYWluU2VydmljZS5HZXRTYW1wbGUoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnRlc3REYXRhID0gZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5TdWJtaXRLZXl3b3JkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VhcmNoRW5naW5lU2VydmljZS5hZGRLZXl3b3JkKHtrZXl3b3JkczogJHNjb3BlLmlucHV0a2V5d29yZHN9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHJvb3RTY29wZS5pbml0bWFpbk1UID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCItLS0tLS0tLS0tIGluaXRtYWluTVQgLS0tLS0tLS0tLVwiKTtcbiAgICAgICAgICAgIHZhciBpbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2VcIik7XG4gICAgICAgICAgICBpbWFnZS5zcmMgPSBcInVwbG9hZHMvXCIgKyAkcm9vdFNjb3BlLmltYWdlcztcbiAgICAgICAgICAgIHZhciBwcmV2aWV3cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJldmlld1wiKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuY3JvcHBlciA9IG5ldyBDcm9wcGVyKGltYWdlLCB7XG4gICAgICAgICAgICAgICAgcmVhZHk6IGZ1bmN0aW9uIChwYXJhbTEsIHBhcmFtMikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS5jbGFzc05hbWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS5zdHlsZS5jc3NUZXh0ID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXNwbGF5OiBibG9jaztcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndpZHRoOiAxMDAlO1wiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWluLXdpZHRoOiAwO1wiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWluLWhlaWdodDogMDtcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1heC13aWR0aDogbm9uZTtcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1heC1oZWlnaHQ6IG5vbmU7XCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHByZXZpZXdzLCBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChjbG9uZS5jbG9uZU5vZGUoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYXNwZWN0UmF0aW86IDE2IC8gOSxcbiAgICAgICAgICAgICAgICBjcm9wOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGUuZGV0YWlsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3JvcHBlciA9IHRoaXMuY3JvcHBlcjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlRGF0YSA9IGNyb3BwZXIuZ2V0SW1hZ2VEYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aWV3QXNwZWN0UmF0aW8gPSBkYXRhLndpZHRoIC8gZGF0YS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwcmV2aWV3cywgZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZWxlbTogXCIsIGVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpZXdJbWFnZSA9IGVsZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbWdcIikuaXRlbSgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aWV3V2lkdGggPSBlbGVtLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpZXdIZWlnaHQgPSBwcmV2aWV3V2lkdGggLyBwcmV2aWV3QXNwZWN0UmF0aW87XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2VTY2FsZWRSYXRpbyA9IGRhdGEud2lkdGggLyBwcmV2aWV3V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmhlaWdodCA9IHByZXZpZXdIZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUud2lkdGggPSBpbWFnZURhdGEubmF0dXJhbFdpZHRoIC8gaW1hZ2VTY2FsZWRSYXRpbyArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdJbWFnZS5zdHlsZS5oZWlnaHQgPSBpbWFnZURhdGEubmF0dXJhbEhlaWdodCAvIGltYWdlU2NhbGVkUmF0aW8gKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUubWFyZ2luTGVmdCA9IC1kYXRhLnggLyBpbWFnZVNjYWxlZFJhdGlvICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0ltYWdlLnN0eWxlLm1hcmdpblRvcCA9IC1kYXRhLnkgLyBpbWFnZVNjYWxlZFJhdGlvICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUucmV0YXRlSW1hZ2UgPSBmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICAgICAgaWYgKHNpZGUgPT09IFwibGVmdFwiKSB7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5jcm9wcGVyLnJvdGF0ZSgtNDUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmNyb3BwZXIucm90YXRlKDQ1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZ2V0Q3JvcHBlZENhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuY3JvcHBlci5nZXRDcm9wcGVkQ2FudmFzKHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTYwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogOTBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHJvb3RTY29wZS5jcm9wcGVyLmdldENyb3BwZWRDYW52YXMoKS50b0Jsb2IoZnVuY3Rpb24gKGJsb2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJjcm9wcGVkSW1hZ2VcIiwgYmxvYik7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi91cGxvYWQvZ2V0Q3JvcHAvXCIsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGZvcm1EYXRhLFxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0tLS06IFVwbG9hZCBzdWNjZXNzIDotLS0tXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pbWFnZXMgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZWNyb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltYWdlY3JvcFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlY3JvcC5zcmMgPSBcInVwbG9hZHMvXCIgKyByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXBsb2FkIGVycm9yXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBUT0RPIDogQmx1bWEgTW9kYWxcbiAgICAgICAgJChcIi5tb2RhbC1idXR0b25cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcykuZGF0YShcInRhcmdldFwiKTtcbiAgICAgICAgICAgICQoXCJodG1sXCIpLmFkZENsYXNzKFwiaXMtY2xpcHBlZFwiKTtcbiAgICAgICAgICAgICQodGFyZ2V0KS5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIi5tb2RhbC1jbG9zZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiaHRtbFwiKS5yZW1vdmVDbGFzcyhcImlzLWNsaXBwZWRcIik7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKCl7XG4gICAgYXBwLmZhY3RvcnkoJ21haW5TZXJ2aWNlJywgZnVuY3Rpb24gKCRodHRwLCRxKSB7XG4gICAgICAgIHZhciB0aGlzZmFjdCA9IHt9O1xuICAgICAgICB0aGlzZmFjdC5HZXRTYW1wbGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgJGh0dHAoe21ldGhvZDogJ0dFVCcsIHVybDogJy9zYW1wbGUnfSkuXG4gICAgICAgICAgICAgICAgc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgICAgIGVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdGhpc2ZhY3Q7XG5cbiAgICB9KTtcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XG4gICAgYXBwLmNvbnRyb2xsZXIoJ3NhbXBsZUN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWwsIHNhbXBsZVNlcnZpY2UpIHtcbiAgICAgICAgJHNjb3BlLmFjdGl2ZVBhZ2UgPSAyOyAvL1wiU2FtcGxlXCI7XG4gICAgICAgICRzY29wZS5yZWFkU2FtcGxlRGF0YSA9IFtdO1xuXG4gICAgICAgIC8vLy0tLS0tLS0tLS0tLSBDcmVhdGUgU2VjdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgJHNjb3BlLmNyZWF0ZVNhbXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNhbXBsZVNlcnZpY2UuY3JlYXRlU2FtcGxlKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIkVSUk9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ+C4geC4suC4o+C4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCcsICfguIHguLLguKPguJrguLHguJnguJfguLbguIHguILguYnguK3guKHguLnguKUnKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlYWRTYW1wbGVEYXRhLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIud2FybmluZygn4LiB4Liy4Lij4Lia4Lix4LiZ4LiX4Li24LiB4Lic4Li04LiU4Lie4Lil4Liy4LiUJyArIHJlc3VsdCwgJ+C4geC4suC4o+C4muC4seC4meC4l+C4tuC4geC4guC5ieC4reC4oeC4ueC4pScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5jcmVhdGVOZXdTYW1wbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzYW1wbGVTZXJ2aWNlLmNyZWF0ZU5ld1NhbXBsZSgkc2NvcGUubW9kYWxEYXRhKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IFwiRVJST1JcIikge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2Vzcygn4LiB4Liy4Lij4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIJywgJ+C4geC4suC4o+C4muC4seC4meC4l+C4tuC4geC4guC5ieC4reC4oeC4ueC4pScpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZFNhbXBsZURhdGEucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguJvguKPguLHguJrguJvguKPguLjguIfguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lib4Lij4Lix4Lia4Lib4Lij4Li44LiH4Lic4Li04LiU4Lie4Lil4Liy4LiUJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAgIC8vLy0tLS0tLS0tLS0tLS0gUmVhZCBTZWN0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHt9O1xuICAgICAgICAkc2NvcGUucmVhZCA9IGZ1bmN0aW9uIChpZCwgY2IpIHtcbiAgICAgICAgICAgIHNhbXBsZVNlcnZpY2UucmVhZFNhbXBsZShpZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY2IocmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5yZWFkQWxsU2FtcGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2FtcGxlU2VydmljZS5yZWFkQWxsU2FtcGxlKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIkVSUk9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlYWRTYW1wbGVEYXRhID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguK3guYjguLLguJnguILguYnguK3guKHguLnguKXguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lit4LmI4Liy4LiZ4LiC4LmJ4Lit4Lih4Li54Lil4Lic4Li04LiU4Lie4Lil4Liy4LiUJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETyA6IFBhZ2luYXRpb24gU2VydmVyc2lkZSBSZWFkRGF0YVxuXG4gICAgICAgIC8vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgICAgICAvLy8tLS0tLS0tLS0tLS0tIFVwZGF0ZSBTZWN0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICRzY29wZS51cGRhdGVTYW1wbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSAkc2NvcGUuY3VycmVudElEO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLmN1cnJlbnRJbmRleDtcbiAgICAgICAgICAgIHNhbXBsZVNlcnZpY2UudXBkYXRlU2FtcGxlKCRzY29wZS5tb2RhbERhdGEsIGlkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IFwiRVJST1JcIikge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZFNhbXBsZURhdGFbaW5kZXhdID0gJHNjb3BlLm1vZGFsRGF0YTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIud2FybmluZygn4LiB4Liy4Lij4Lib4Lij4Lix4Lia4Lib4Lij4Li44LiH4Lic4Li04LiU4Lie4Lil4Liy4LiUJyArIHJlc3VsdCwgJ+C4geC4suC4o+C4m+C4o+C4seC4muC4m+C4o+C4uOC4h+C4nOC4tOC4lOC4nuC4peC4suC4lCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAgIC8vLy0tLS0tLS0tLS0tLS0gRGVsZXRlIFNlY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgJHNjb3BlLmRlbGV0ZUNvbmZpcm0gPSBmdW5jdGlvbiAoaWQsIGluZGV4KSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudElEID0gaWQ7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAkbW9kYWwoe3Njb3BlOiAkc2NvcGUsIHRlbXBsYXRlOiAnL3ZpZXdzL3NhbXBsZS9tb2RhbC9zYW1wbGVDb25maXJtLmh0bWwnLCBzaG93OiB0cnVlfSk7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5kZWxldGVTYW1wbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSAkc2NvcGUuY3VycmVudElEO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLmN1cnJlbnRJbmRleDtcblxuICAgICAgICAgICAgc2FtcGxlU2VydmljZS5kZWxldGVTYW1wbGUoaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJFUlJPUlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWFkU2FtcGxlRGF0YS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguKXguJrguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lil4Lia4Lic4Li04LiU4Lie4Lil4Liy4LiUJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAgIC8vLy0tLS0tLS0tLS0tLS0tIE90aGVyIFNlY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgJHNjb3BlLmNoZWNrRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoJHNjb3BlLm1vZGFsTW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjcmVhdGVcIiA6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jcmVhdGVOZXdTYW1wbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVkaXRcIiA6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVTYW1wbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnNob3dTYW1wbGUgPSBmdW5jdGlvbiAodHlwZSwgaWQsIGluZGV4KSB7XG4gICAgICAgICAgICAkc2NvcGUubW9kYWxNb2RlID0gdHlwZTtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50SUQgPSBpZDtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIHZhciBteU90aGVyTW9kYWwgPSAkbW9kYWwoe3Njb3BlOiAkc2NvcGUsIHRlbXBsYXRlOiAnL3ZpZXdzL3NhbXBsZS9tb2RhbC9zYW1wbGVNb2RhbC5odG1sJywgc2hvdzogZmFsc2V9KTtcblxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3JlYXRlJyA6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2RhbERhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YS5yZWFkT25seSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBteU90aGVyTW9kYWwuJHByb21pc2UudGhlbihteU90aGVyTW9kYWwuc2hvdyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3cnIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlYWQoaWQsIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJFUlJPUlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlPdGhlck1vZGFsLiRwcm9taXNlLnRoZW4obXlPdGhlck1vZGFsLnNob3cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2RhbERhdGEgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YS5iQ3JlYXRlID0gSlNPTi5wYXJzZShyZXN1bHQuYkNyZWF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YS5yZWFkT25seSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguK3guYjguLLguJnguILguYnguK3guKHguLnguKXguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lit4LmI4Liy4LiZ4LiC4LmJ4Lit4Lih4Li54Lil4Lic4Li04LiU4Lie4Lil4Liy4LiUJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VkaXQnIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlYWQoaWQsIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJFUlJPUlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlPdGhlck1vZGFsLiRwcm9taXNlLnRoZW4obXlPdGhlck1vZGFsLnNob3cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2RhbERhdGEgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YS5iQ3JlYXRlID0gSlNPTi5wYXJzZShyZXN1bHQuYkNyZWF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YS5yZWFkT25seSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdHIud2FybmluZygn4LiB4Liy4Lij4Lit4LmI4Liy4LiZ4LiC4LmJ4Lit4Lih4Li54Lil4Lic4Li04LiU4Lie4Lil4Liy4LiUJyArIHJlc3VsdCwgJ+C4geC4suC4o+C4reC5iOC4suC4meC4guC5ieC4reC4oeC4ueC4peC4nOC4tOC4lOC4nuC4peC4suC4lCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbigpe1xuICAgIGFwcC5mYWN0b3J5KCdzYW1wbGVTZXJ2aWNlJywgZnVuY3Rpb24gKCRodHRwLCRxKSB7XG4gICAgICAgIHZhciB0aGlzZmFjdCA9IHt9O1xuICAgICAgICB0aGlzZmFjdC5jcmVhdGVTYW1wbGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvc2FtcGxlL2NyZWF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdSZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4nOiB0b2tlblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChkYXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXNmYWN0LmNyZWF0ZU5ld1NhbXBsZSA9IGZ1bmN0aW9uKG9iail7XG4gICAgICAgICAgICBzcGlubmVyLnNob3coKTtcbiAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2FtcGxlL2NyZWF0ZW5ldycsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7IE5hbWU6IG9iai5OYW1lLCBiQ3JlYXRlOiBvYmouYkNyZWF0ZX0sXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdSZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4nOiB0b2tlblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzZmFjdC5yZWFkQWxsU2FtcGxlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAkaHR0cChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvcmVhZCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdSZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4nOiB0b2tlblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChkYXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXNmYWN0LmRlbGV0ZVNhbXBsZSA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvZGVsZXRlLycraWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdSZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4nOiB0b2tlblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChkYXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXNmYWN0LnJlYWRTYW1wbGUgPSBmdW5jdGlvbihpZCl7XG4gICAgICAgICAgICBzcGlubmVyLnNob3coKTtcbiAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvc2FtcGxlL3JlYWQvJytpZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpc2ZhY3QudXBkYXRlU2FtcGxlID0gZnVuY3Rpb24ob2JqLGlkKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvdXBkYXRlLycraWQsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgTmFtZTogb2JqLk5hbWUsIGJDcmVhdGU6IG9iai5iQ3JlYXRlfSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXNmYWN0O1xuXG4gICAgfSk7XG59KSgpO1xuKGZ1bmN0aW9uKCl7XG4gICAgYXBwLmZhY3RvcnkoJ3NlYXJjaEVuZ2luZVNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsJHEpIHtcbiAgICAgICAgdmFyIHRoaXNmYWN0ID0ge307XG4gICAgICAgIHRoaXNmYWN0LmFkZEtleXdvcmQgPSBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NlYXJjaGVuZ2luZS9hZGRLZXl3b3JkJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgIGRhdGEgOiBkYXRhLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuJzogdG9rZW5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXNmYWN0O1xuICAgIH0pO1xufSkoKTsiXX0=
